<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><!-- InstanceBegin template="/Templates/main.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!-- InstanceBeginEditable name="title" -->
<title>Strawberry Perl for Windows - Documentation - Building your own Strawberry Perl</title>
<!-- InstanceEndEditable -->
<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="http://strawberryperl.com/favicon.ico">
<link rel="stylesheet" type="text/css" href="http://strawberryperl.com/common.css">
<link rel="stylesheet" type="text/css" href="http://strawberryperl.com/main.css">
<!-- InstanceBeginEditable name="head" --><!-- InstanceEndEditable -->
</head>
<body>
<!-- InstanceBeginEditable name="body" -->
<a href="index.html"><img src="http://strawberryperl.com/images/1036400_58384714.jpg" alt="Strawberry Perl Home" width="246" height="521" hspace="0" vspace="20" border="0" align="right"></a>
<h1>Building your own "Strawberry Perl Plus..."</h1>
<table border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td>
	<h2>What do I need?</h2>
      <p>Start with an installation of either <a href="http://strawberryperl.com/releases.html">Bootstrap Perl</a>, or a current version of Strawberry Perl 5.12.0.x. You'll need to install Strawberry Perl to a directory OTHER THAN C:\strawberry.</p>
	  <p>Install 4 modules, in this order:<br />
	  <ul>
		<li><a href="http://search.cpan.org/perldoc?Readonly::XS">Readonly::XS</a></li>
		<li><a href="http://search.cpan.org/perldoc?Alien::WiX">Alien::WiX</a></li>
		<li><a href="http://search.cpan.org/perldoc?Perl::Dist::WiX">Perl::Dist::WiX</a></li>
		<li><a href="http://search.cpan.org/perldoc?Perl::Dist::Strawberry">Perl::Dist::Strawberry</a></li>
	  </ul>
	  These modules will install almost all of the others needed. (Most of the prerequisite modules will already be installed on Bootstrap Perl.)</p>
      <p>You may wish to install <a href="http://growlforwindows.com">Growl for Windows</a> and <a href="http://search.cpan.org/perldoc?Growl::GNTP">Growl::GNTP</a>, as once these two things are installed, Perl::Dist::WiX can use them to announce when builds are finished.  This may not be as useful until you have multiple machines (virtual or real) building distributions. (Perl::Dist::WiX assumes there is a local copy of Growl for Windows running to notify, but that copy can redirect notifications to another machine.)</p>
    <h2>What do I do after everything's installed?</h2>
	<p>There are two more things to do:<br />
	  <ul>
	    <li>Create a file "YourPerlBuild.pm" with these contents, then edit as appropriate:
	  <pre>
package YourPerlBuild;

use 5.008001;
use strict;
use warnings;
use parent qw(Perl::Dist::Strawberry);

our $VERSION = '1.200';
$VERSION =~ s/_//ms;

sub new {
	my $class = shift;
	my %args;

	# Check for the correct version of Perl::Dist::WiX.
	Perl::Dist::WiX->VERSION(2.10);

	if ( @_ == 1 && 'HASH' eq ref $_[0] ) {
		%args = %{ $_[0] };
	} elsif ( 0 == @_ % 2 ) {
		%args = (@_);
	} else {
		PDWiX->throw(
			'Parameters incorrect (not a hashref or hash) for YourPerlBuild->new()');
	}

	%args = (
		# Set this to 2 for now. You can set it to 1 later.
		trace             => 2,
		
		# Change these as appropriate for what you want to call your distribution.
		app_publisher_url => 'http://yourwebsite.invalid/',
		app_id            => 'yourperl',
		app_name          => 'Your Perl',
		app_publisher     => 'Your Publisher',
		
		build_number      => 2,
		
		# This specifies which version of Perl to use.
		perl_version      => '5101',
		
		# These are the locations to pull down the msm. 
		# You'll want to look at the link below to know what to set here.
		msm_to_use => 'http://strawberryperl.com/download/strawberry-msm/strawberry-perl-5.10.1.2.msm',
		msm_zip    => 'http://strawberryperl.com/download/strawberry-perl-5.10.1.2.zip',
		msm_code   => 'BC4B680E-4871-31E7-9883-3E2C74EA4F3C',

		# TODO: Put other arguments here.
		
		# If you want more than one routine that installs modules,
		# you'll need to specify them all in the tasklist.
		tasklist => [
			'final_initialization',
			'initialize_using_msm',
			'install_your_modules',
			'install_win32_extras',
			'install_strawberry_extras',
			'remove_waste',
			'regenerate_fragments',
			'write',
		],
		%args,
	);

	return $class->SUPER::new( \%args );
} ## end sub new


sub install_your_modules {
	my $self = shift;

	# TODO: List your modules here.
	# PLEASE NOTE that you must list all the prerequisites
	# (that aren't installed in Strawberry Perl) in this list.
	$self->install_modules( qw{
		Spreadsheet::ParseExcel
	} );
}

# Default the output filename to the id plus the current date
sub _build_output_base_filename {
	my $self = shift;

	my $bits = ( 64 == $self->bits() ) ? q{-64bit} : q{};

	my $string =
	    $self->app_id() . q{-}
	  . $self->perl_version_human() . q{.}
	  . $self->build_number() . q{-}
	  . $self->output_date_string()
	  . $bits;

	return $string;
} ## end sub _build_output_base_filename

1;
	  </pre>
      <li>Create a script (let's call it build_perl.pl) and place it in the same directory as MyPerlBuild.pm.</li>
	  <pre>
use YourPerlBuild;

my $dist = YourPerlBuild->new();
$dist->run();
	  </pre>
	  </ul></p>
	  <p>The link referred to above is currently at <a href="http://strawberryperl.com/documentation/merge-module/">http://strawberryperl.com/documentation/merge-module/</a>.</p>
	  <p>Run build_perl.pl, wait a few hours, and you're done.</p>
	  <p>If you want to do more complicated things than just add additional modules, read the Perl::Dist::WiX documentation, and then e-mail us and we'll do our best to help you out.</p>
    </td>
  </tr>
</table>

<!-- Start Quantcast tag -->
<script type="text/javascript">
_qoptions={
qacct:"p-44rvHMFUvK7tg"
};
</script>
<script type="text/javascript" src="http://edge.quantserve.com/quant.js"></script>
<noscript>
<img src="http://pixel.quantserve.com/pixel/p-44rvHMFUvK7tg.gif" style="display: none;" border="0" height="1" width="1" alt="Quantcast"/>
</noscript>
<!-- End Quantcast tag -->

<!-- InstanceEndEditable -->
</body>
<!-- InstanceEnd --></html>
